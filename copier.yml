_min_copier_version: '9.0.0'
_subdirectory: template
_answers_file: .copier-answers.yml

type:
  type: str
  choices:
    - base
    - node
  default: base
  help: Project type (base = minimal template, node = Node.js/TypeScript project)

# Note: _folder_name cannot be used because it resolves to a temporary directory
# path during copier update. See: https://github.com/copier-org/copier/issues/1285
project_name:
  type: str
  help: Project name

description:
  type: str
  help: Project description for README.md
  default: ''

# README.md is expected to be customized immediately after repository creation,
# so conflicts are almost guaranteed on copier update. Skip to avoid this.
# bun.lock is included in template to avoid conflicts on copier update
# (users may add packages, causing lockfile changes).
_skip_if_exists:
  - README.md
  - bun.lock

# Exclude files that are specific to this template repository
# and not needed in derived repositories
_exclude:
  # Exclude external refs plugin for private repos
  - '{% if not is_public %}commitlint-plugin-no-external-refs.ts{% endif %}'
  # Conditional exclusion when release-please is disabled.
  # NOTE: Copier's _exclude matches against OUTPUT file names (without .jinja
  # suffix), not source file names.
  #
  #   _exclude pattern                 | use_release_please=true | =false
  #   ---------------------------------|-------------------------|----------
  #   release-please-config.json       | generated               | excluded
  #   release-please-config.json.jinja | generated               | generated
  - '{% if not use_release_please %}release-please-config.json{% endif %}'
  - '{% if not use_release_please %}.release-please-manifest.json{% endif %}'
  - '{% if not use_release_please %}.github/workflows/release-please.yml{% endif %}'
  # Exclude Node.js specific files when type is not 'node'
  - "{% if type != 'node' %}package.json{% endif %}"
  - "{% if type != 'node' %}tsconfig.json{% endif %}"
  - "{% if type != 'node' %}eslint.config.js{% endif %}"
  - "{% if type != 'node' %}vitest.config.ts{% endif %}"
  - "{% if type != 'node' %}.gitignore{% endif %}"
  - "{% if type != 'node' %}src{% endif %}"
  - "{% if type != 'node' %}bun.lock{% endif %}"

# Template parameters
is_public:
  type: bool
  default: false
  help: Is this a public repository?

# release-please settings
use_release_please:
  type: bool
  default: false
  help: Enable automated release management with release-please?

release_type:
  type: str
  choices:
    - simple
    - node
    - python
    - go
    - rust
    - java
  help: Select the release-type for your project
  when: '{{ use_release_please }}'
